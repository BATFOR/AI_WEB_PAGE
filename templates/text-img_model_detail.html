<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Named Entity Recognition</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <!-- 引入 layui.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/layui/2.8.6/css/layui.min.css" integrity="sha512-gYnT2bdWXg9kSl/wFtOGREN3hHPklo0m7L3InAcpexBE+L7WWqU7DcqAOPQ33G2Fz8KxRq9kIZy4xsYFDsO40g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="../static/favicon.ico"> <link href="../static/css/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="../static/css/font-awesome.css?v=4.4.0" rel="stylesheet">
    <link href="../static/css/plugins/iCheck/custom.css" rel="stylesheet">
    <link href="../static/css/animate.css" rel="stylesheet">
    <link href="../static/css/style.css?v=4.1.0" rel="stylesheet">

</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content">
        <div class="row">
            <div class="animated fadeInRight">
                <div class="mail-box-header">
                    <h2><strong> Image-text Correlation Measure</strong></h2>
                    <div class="mail-tools tooltip-demo m-t-md">
                        <h3>
                        <span class="font-noraml">Image-text correlation measurement is a metric used to assess the similarity between images and text, quantifying their correlation and level of matching.</span>
                        </h3>
                    </div>
                </div>
                <div class="mail-box">
                    <div class="mail-body">
                        <h3>Model</h3>
                        <div>
                            <h3>Graph-Text Correlation Measuring Method Based on <b>M</b>ulti-view <b>S</b>emantic <b>A</b>lignment（MSA）</h3>
                        </div>
                        <p style="font-size: 15px;">
                            The MSA(Graph-Text Correlation Measuring Method Based on <b>M</b>ulti-view <b>S</b>emantic <b>A</b>lignment) model is a baseline model for measuring the correlation between images and text, which uses CNN and Transformer networks to represent and model images and text. This method utilizes the local feature information of multiple views in graphic and textual data. Firstly, using the idea of selective local search, high-quality multi-view local objects are extracted from global images based on local target detectors. At the same time, text segmentation is performed to mine multi-view local entities from the unstructured text. Then, the graph convolutional network is used to learn the contextual semantics in local objects of multiple views, and the bidirectional long short-term network is used to learn the contextual semantics in local entities of multiple views, thereby improving the semantic representation ability of multi-view features. Secondly, through a multi-level information dynamic obfuscation network, dynamic weights are assigned to multi-view instances of image or text data itself to highlight the focus of semantic representation of image and text data. Finally, in order to establish semantic alignment of multi-view instances between graphic and textual data, an adaptive semantic alignment network is used to establish fine-grained semantic associations between heterogeneous data, in order to break the semantic gap between graphic and textual data and achieve correct matching between them. It was trained on the unmanned vessel maritime multimodal dataset.
                        </p>
                    </div>
                    <div class="mail-body">
                        <h3>Demo</h3>
                         <div class="col-sm-12">
                            <h3  style="font-weight: normal">Example Inputs</h3>
                            <select class="form-control" name="" id="sim_example_sentence" style="padding-left: 8px;">
                                <option style="display: none"></option>
                                <option>攻击型无人艇研制方就是中船重工集团公司</option>
                                <option>无人艇可以安装武器遥控站，集成机枪、机关炮、榴弹发射器、小型导弹等武器</option>
                                <option>调查使用了美国伍兹霍尔海洋研究所研发的无人潜艇</option>
                                <option>新艇概况新展出的攻击型无人艇在企业展会现场推介的英文资料上被命名为JARI</option>
                            </select>
                        </div>
                        <div style="margin-top: 6em;">
                            <div class="col-sm-12">
                                <h3  style="font-weight: normal">Sentence</h3>
                                <div>
                                    <input id="sim_input_sentence" type="text" name="" class="form-control" placeholder="please enter text">
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 6em;">
                            <div class="col-sm-12">
                                <h3  style="font-weight: normal;">Image Path</h3>
                                <div class="layui-upload">
                                    <button type="button" class="layui-btn" id="ID-upload-demo-btn-2">
                                        <i class="layui-icon layui-icon-upload"></i> Select Images
                                    </button>
                                    <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 11px;">
                                        <div class="layui-upload-list" id="upload-demo-preview" style="height: 90px;width: 100%;display: flex;justify-content: center;align-items: center;"></div>
                                    </blockquote>
                                </div>
                            </div>
                        </div>
                        <div style="padding-left: 15px;" >
                            <button id="sim_run_model" class="btn btn-w-m btn-info" type="button" style="margin-top: 4px;">Run Model</button>
                        </div>
                    </div>
                    <div class="mail-body" id="result_panel">
                        <h3>Model Output</h3>
                        <div style="font-size: 15px;">
                            <p>Similarity: <strong id="image_text_simi"style="color: red;">0.999</strong></p>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
        </div>
    </div>


    <!-- 全局js -->
    <script src="../static/js/jquery.min.js?v=2.1.4"></script>
    <script src="../static/js/bootstrap.min.js?v=3.3.6"></script>


    <!-- 自定义js -->
    <script src="../static/js/content.js?v=1.0.0"></script>


    <!-- iCheck -->
    <script src="../static/js/plugins/iCheck/icheck.min.js"></script>
    <!-- Prettyfile -->
    <script src="../static/js/plugins/prettyfile/bootstrap-prettyfile.js"></script>
    <!-- 引入 layui.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/layui/2.8.6/layui.min.js" integrity="sha512-Ehmp24RDI3YEqzC79P1pT7GAcWvyaq9dbE9lbG9AwNYHlYCQNkElNbxok7aOEtRTtVqfiooXl0LkO9INAGO/aw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        image_host = "http://58.199.166.122:9090/"
        is_new_img_up = true
        $(document).ready(function () {
            $('#result_panel').hide();
            $('#sim_example_sentence').change(function (){
                var selectedValue = $(this).val();
                $("#sim_input_sentence").val(selectedValue)
                $('#upload-demo-preview').find('img').remove();
                $('#upload-demo-preview').append('<img src="' + image_host+'getImg/460.png' + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                $('#upload-demo-preview').append('<img src="' + image_host+'getImg/655.png' + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                $('#upload-demo-preview').append('<img src="' + image_host+'getImg/dog.png' + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                $('#upload-demo-preview').append('<img src="' + image_host+'getImg/fish.png' + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                $('#upload-demo-preview').append('<img src="' + image_host+'getImg/house.png' + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                is_new_img_up = true
            });
            $('#sim_run_model').click(function () {
                if($('#sim_input_sentence').val().trim().length==0){
                    alert("请输入待预测句子!")
                    return;
                }
                if($('#upload-demo-preview').find('img').length == 0){
                    alert("请输入视觉图片!")
                    return;
                }
                var formData = new FormData();
                var imgSrcArray = []
                $('#upload-demo-preview img').each(function () {
                    var src = $(this).attr('src');  // 获取当前 img 元素的 src 属性值
                    imgSrcArray.push(src);  // 将 src 属性值添加到数组中
                });

                formData.append("sentence", $('#sim_input_sentence').val());
                formData.append("images", imgSrcArray.join("\\"));

                // console.log(formData)
                $('#sim_run_model').prop('disabled', true);
                $.ajax({
                    url: 'http://58.199.166.122:8080/msa',
                    method: "POST",
                    timeout: 0,
                    processData: false,
                    mimeType: "multipart/form-data",
                    contentType: false,
                    data: formData,
                    success: function (response) {
                        response = JSON.parse(response)
                        var res = []
                        if(response.status == 1){
                            for(let key in response.result){
                                if (response.result.hasOwnProperty(key)) {
                                    const value = response.result[key];
                                    res.push(value)
                                }
                            }
                            $("#image_text_simi").text(res.join("｜"));
                            $('#result_panel').show();
                        }else{
                            alert("请求失败！")
                        }
                        // 请求成功的回调函数
                        console.log(response);
                    },
                    error: function (xhr, status, error) {
                        // 请求失败的回调函数
                        alert("请求失败！")
                        console.error(error);
                    }
                });
                $('#sim_run_model').prop('disabled', false)
            });
        });
        layui.use(function () {
            var upload = layui.upload;
            var layer = layui.layer;
            var $ = layui.$;
            // 多图片上传
            upload.render({
                elem: '#ID-upload-demo-btn-2',
                url: image_host+"img_up", // 此处用的是第三方的 http 请求演示，实际使用时改成您自己的上传接口即可。
                multiple: true,
                acceptMime: 'image/*',
                number:5,
                size:5120,
                before: function (obj) {
                    // 预读本地文件示例，不支持ie8
                    obj.preview(function (index, file, result) {
                        $('#upload-demo-preview').append('<img src="' + result + '" alt="' + file.name + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                    });
                },
                done: function (res) {
                    if(is_new_img_up){
                        $('#upload-demo-preview').find('img').remove();
                        is_new_img_up = false
                    }
                    $('#upload-demo-preview').append('<img src="' + image_host+res.img_path + '" style="width: 90px; height: 90px;margin-left: 5px;">')
                },
                allDone: function(obj){
                  layer.msg('上传完毕', {icon: 1});
                  is_new_img_up = true
                }
            });
        });
    </script>
</body>

</html>
